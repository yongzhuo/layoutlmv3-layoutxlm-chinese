# -*- coding: UTF-8 -*-
# !/usr/bin/python
# @time     :2022/6/17 14:30 
# @author   :Mo
# @function :OCR of text and table


import traceback

from paddleocr import PPStructure, PaddleOCR


ppocr = PaddleOCR()


def ocr_text(path_img):
    """
        ocr text of common
    Args:
        path_img[String/Numpy]: path of file of read/numpy of img, eg. "cnn_network_VGG_architecture.png"/ np.array([1, 2, 3])
    Returns:
        res[List]: output lines
    """
    # res = ppocr.ocr(path_img, det=True, rec=True, cls=True)
    res = ppocr.ocr(path_img, det=True, rec=True, cls=False)
    return res


if __name__ == '__main__':

    # path_img = "val_0007/Text_0.png"

    path_img = "../layoutxlm/model/img/img.org.png"
    result = ocr_text(path_img)
    print(result)


[[[[13.0, 23.0], [448.0, 23.0], [448.0, 36.0], [13.0, 36.0]], (
'Textle I: ConvNet configurations (shown in columns). The depth of the configurations increases', 0.9425430297851562)],

 [[[14.0, 35.0], [448.0, 35.0], [448.0, 48.0], [14.0, 48.0]], (
 'from the left (A) to the right (E), as more layers are added (the added layers are shown in bold). The',
 0.9237781763076782)], [[[14.0, 48.0], [447.0, 48.0], [447.0, 61.0], [14.0, 61.0]], (

'convolutional layer parameters are denoted as "conv(receptive field size)-(number of channels)".',
0.9232068657875061)], [[[13.0, 60.0], [255.0, 60.0], [255.0, 72.0], [13.0, 72.0]],
                       ('The ReLU activation function is not shown for brevity.', 0.9257298707962036)],
 [[[65.0, 75.0], [94.0, 75.0], [94.0, 88.0], [65.0, 88.0]], ('Table,', 0.9024520516395569)],
 [[[183.0, 73.0], [276.0, 73.0], [276.0, 83.0], [183.0, 83.0]], ('CuvNer Conigurauun', 0.7125648260116577)],
 [[[130.0, 83.0], [164.0, 83.0], [164.0, 94.0], [130.0, 94.0]], ('A-LRN', 0.9963140487670898)],
 [[[195.0, 83.0], [209.0, 83.0], [209.0, 95.0], [195.0, 95.0]], ('B', 0.9739803075790405)],
 [[[69.0, 92.0], [113.0, 94.0], [112.0, 109.0], [68.0, 106.0]], ('T1 weight', 0.807260274887085)],
 [[[179.0, 92.0], [224.0, 94.0], [223.0, 108.0], [178.0, 105.0]], ('13 weight', 0.9296053647994995)],
 [[[345.0, 92.0], [390.0, 94.0], [389.0, 109.0], [344.0, 106.0]], ('19 weight', 0.920985221862793)],
 [[[362.0, 84.0], [372.0, 84.0], [372.0, 95.0], [362.0, 95.0]], ('E', 0.9819877743721008)],
 [[[127.0, 94.0], [168.0, 94.0], [168.0, 107.0], [127.0, 107.0]], ('I1 weight', 0.8695169687271118)],
 [[[237.0, 95.0], [276.0, 95.0], [276.0, 106.0], [237.0, 106.0]], ('16 weight', 0.9164863228797913)],
 [[[292.0, 94.0], [333.0, 94.0], [333.0, 107.0], [292.0, 107.0]], ('16 weight', 0.9836447834968567)],
 [[[77.0, 106.0], [106.0, 106.0], [106.0, 118.0], [77.0, 118.0]], ('layers', 0.9243062138557434)],
 [[[134.0, 106.0], [160.0, 106.0], [160.0, 117.0], [134.0, 117.0]], ('layers', 0.9838977456092834)],
 [[[189.0, 106.0], [216.0, 106.0], [216.0, 117.0], [189.0, 117.0]], ('layers', 0.9432736039161682)],
 [[[242.0, 106.0], [271.0, 106.0], [271.0, 118.0], [242.0, 118.0]], ('layers', 0.9400908946990967)],
 [[[298.0, 103.0], [326.0, 106.0], [325.0, 120.0], [297.0, 117.0]], ('layers', 0.91628497838974)],
 [[[354.0, 106.0], [383.0, 106.0], [383.0, 118.0], [354.0, 118.0]], ('layers', 0.9525793194770813)],
 [[[168.0, 117.0], [289.0, 117.0], [289.0, 131.0], [168.0, 131.0]], ('input (224 Ã— 224 RGB imag)', 0.9235353469848633)],
 [[[127.0, 129.0], [167.0, 129.0], [167.0, 143.0], [127.0, 143.0]], ('conv3-64', 0.9226272106170654)],
 [[[180.0, 129.0], [222.0, 129.0], [222.0, 143.0], [180.0, 143.0]], ('conv3-64', 0.9296882152557373)],
 [[[236.0, 129.0], [277.0, 129.0], [277.0, 143.0], [236.0, 143.0]], ('conv3-64', 0.8623272180557251)],
 [[[292.0, 128.0], [332.0, 128.0], [332.0, 143.0], [292.0, 143.0]], ('conv3 64', 0.9437182545661926)],
 [[[72.0, 130.0], [111.0, 130.0], [111.0, 141.0], [72.0, 141.0]], ('comv3-64', 0.9003773927688599)],
 [[[345.0, 129.0], [388.0, 129.0], [388.0, 143.0], [345.0, 143.0]], ('conv3-64', 0.944339394569397)],
 [[[180.0, 140.0], [223.0, 140.0], [223.0, 153.0], [180.0, 153.0]], ('conv3-64', 0.7927128076553345)],
 [[[291.0, 140.0], [332.0, 140.0], [332.0, 153.0], [291.0, 153.0]], ('comv3-64', 0.8769292235374451)],
 [[[134.0, 141.0], [159.0, 141.0], [159.0, 152.0], [134.0, 152.0]], ('LRN', 0.97232985496521)],
 [[[235.0, 142.0], [276.0, 140.0], [277.0, 150.0], [236.0, 153.0]], ('comv3-64', 0.8957360982894897)],
 [[[344.0, 140.0], [390.0, 140.0], [390.0, 153.0], [344.0, 153.0]], ('conv3-64', 0.9258444905281067)],
 [[[210.0, 151.0], [249.0, 151.0], [249.0, 165.0], [210.0, 165.0]], ('maxpool', 0.9670934081077576)],
 [[[67.0, 162.0], [116.0, 162.0], [116.0, 176.0], [67.0, 176.0]], ('conv3-128', 0.9877097606658936)],
 [[[178.0, 162.0], [225.0, 162.0], [225.0, 176.0], [178.0, 176.0]], ('conv3-128', 0.9446579813957214)],
 [[[232.0, 162.0], [280.0, 162.0], [280.0, 176.0], [232.0, 176.0]], ('conv3-128', 0.9850499033927917)],
 [[[125.0, 164.0], [168.0, 164.0], [168.0, 175.0], [125.0, 175.0]], ('conv3-128', 0.9647742509841919)],
 [[[290.0, 164.0], [334.0, 164.0], [334.0, 175.0], [290.0, 175.0]], ('conv3-128', 0.8887469172477722)],
 [[[342.0, 162.0], [389.0, 160.0], [390.0, 175.0], [343.0, 177.0]], ('comv3-128', 0.9654631018638611)],
 [[[179.0, 174.0], [226.0, 174.0], [226.0, 185.0], [179.0, 185.0]], ('conv3-128', 0.9022864103317261)],
 [[[232.0, 174.0], [279.0, 174.0], [279.0, 185.0], [232.0, 185.0]], ('conv3-128', 0.8559983968734741)],
 [[[289.0, 174.0], [334.0, 174.0], [334.0, 185.0], [289.0, 185.0]], ('conv3-128', 0.8766834735870361)],
 [[[342.0, 173.0], [391.0, 173.0], [391.0, 187.0], [342.0, 187.0]], ('conv3-128', 0.9136098027229309)],
 [[[209.0, 185.0], [249.0, 185.0], [249.0, 198.0], [209.0, 198.0]], ('maxpool', 0.9384753108024597)],
 [[[68.0, 195.0], [116.0, 195.0], [116.0, 209.0], [68.0, 209.0]], ('conv3-256', 0.9387103319168091)],
 [[[124.0, 195.0], [169.0, 195.0], [169.0, 209.0], [124.0, 209.0]], ('conv3-256', 0.9927816390991211)],
 [[[177.0, 195.0], [226.0, 195.0], [226.0, 209.0], [177.0, 209.0]], ('conv3-256', 0.9775151014328003)],
 [[[230.0, 195.0], [280.0, 195.0], [280.0, 209.0], [230.0, 209.0]], ('conv3-256', 0.9610766172409058)],
 [[[290.0, 197.0], [334.0, 197.0], [334.0, 208.0], [290.0, 208.0]], ('conv3-256', 0.9121604561805725)],
 [[[343.0, 195.0], [390.0, 195.0], [390.0, 209.0], [343.0, 209.0]], ('comv3-256', 0.9571532011032104)],
 [[[232.0, 206.0], [280.0, 204.0], [281.0, 219.0], [233.0, 221.0]], ('conv3-256', 0.9054937362670898)],
 [[[287.0, 206.0], [335.0, 204.0], [335.0, 219.0], [288.0, 221.0]], ('conv3-256', 0.9384434223175049)],
 [[[68.0, 207.0], [114.0, 207.0], [114.0, 221.0], [68.0, 221.0]], ('conv3-256', 0.9801236391067505)],
 [[[122.0, 207.0], [169.0, 205.0], [169.0, 219.0], [123.0, 221.0]], ('conv3-256', 0.9114059805870056)],
 [[[178.0, 208.0], [223.0, 208.0], [223.0, 219.0], [178.0, 219.0]], ('conv3-256', 0.9346930980682373)],
 [[[342.0, 206.0], [390.0, 204.0], [391.0, 219.0], [343.0, 221.0]], ('comv3-256', 0.9281733632087708)],
 [[[233.0, 217.0], [280.0, 217.0], [280.0, 231.0], [233.0, 231.0]], ('conv1-256', 0.9673445224761963)],
 [[[289.0, 217.0], [335.0, 217.0], [335.0, 231.0], [289.0, 231.0]], ('conv3-256', 0.9751968383789062)],
 [[[344.0, 217.0], [391.0, 217.0], [391.0, 231.0], [344.0, 231.0]], ('conv3-256', 0.9282416105270386)],
 [[[342.0, 228.0], [392.0, 228.0], [392.0, 241.0], [342.0, 241.0]], ('conv3-256', 0.9387276768684387)],
 [[[209.0, 239.0], [249.0, 239.0], [249.0, 253.0], [209.0, 253.0]], ('mixpool', 0.8132864236831665)],
 [[[68.0, 250.0], [116.0, 250.0], [116.0, 264.0], [68.0, 264.0]], ('conv3-512', 0.898178219795227)],
 [[[177.0, 250.0], [226.0, 250.0], [226.0, 264.0], [177.0, 264.0]], ('conv3-512', 0.9420002698898315)],
 [[[124.0, 252.0], [168.0, 252.0], [168.0, 263.0], [124.0, 263.0]], ('conv3-512', 0.9325646162033081)],
 [[[231.0, 250.0], [280.0, 250.0], [280.0, 264.0], [231.0, 264.0]], ('conv3-512', 0.9496707916259766)],
 [[[290.0, 252.0], [334.0, 252.0], [334.0, 263.0], [290.0, 263.0]], ('conv3-512', 0.8953641057014465)],
 [[[344.0, 252.0], [390.0, 252.0], [390.0, 263.0], [344.0, 263.0]], ('comv3-512', 0.9284782409667969)],
 [[[68.0, 262.0], [114.0, 262.0], [114.0, 276.0], [68.0, 276.0]], ('conv3-512', 0.9340911507606506)],
 [[[124.0, 262.0], [169.0, 262.0], [169.0, 276.0], [124.0, 276.0]], ('conv3-512', 0.9624287486076355)],
 [[[176.0, 262.0], [223.0, 260.0], [224.0, 273.0], [177.0, 276.0]], ('conv3-512', 0.9059697389602661)],
 [[[231.0, 262.0], [280.0, 260.0], [281.0, 273.0], [231.0, 276.0]], ('conv3-512', 0.8871620297431946)],
 [[[289.0, 262.0], [335.0, 262.0], [335.0, 276.0], [289.0, 276.0]], ('conv3-512', 0.9164549708366394)],
 [[[342.0, 262.0], [389.0, 260.0], [390.0, 273.0], [343.0, 276.0]], ('comv3-512', 0.8964198231697083)],
 [[[233.0, 274.0], [279.0, 274.0], [279.0, 284.0], [233.0, 284.0]], ('conv1-512', 0.9351019263267517)],
 [[[289.0, 274.0], [334.0, 274.0], [334.0, 284.0], [289.0, 284.0]], ('conv3-512', 0.8639905452728271)],
 [[[342.0, 273.0], [390.0, 270.0], [391.0, 284.0], [343.0, 287.0]], ('cov3-512', 0.943783164024353)],
 [[[342.0, 281.0], [392.0, 284.0], [391.0, 297.0], [341.0, 295.0]], ('com3-512', 0.8655929565429688)],
 [[[210.0, 296.0], [247.0, 296.0], [247.0, 307.0], [210.0, 307.0]], ('maxpool', 0.9718985557556152)],
 [[[124.0, 306.0], [168.0, 306.0], [168.0, 320.0], [124.0, 320.0]], ('conv3-512', 0.9712693095207214)],
 [[[69.0, 307.0], [114.0, 307.0], [114.0, 318.0], [69.0, 318.0]], ('conv3-512', 0.8766418099403381)],
 [[[178.0, 307.0], [227.0, 307.0], [227.0, 318.0], [178.0, 318.0]], ('conv3-512', 0.9291921257972717)],
 [[[228.0, 307.0], [279.0, 307.0], [279.0, 318.0], [228.0, 318.0]], ('conv3-512', 0.9399099349975586)],
 [[[287.0, 306.0], [335.0, 304.0], [335.0, 317.0], [288.0, 320.0]], ('comv3-512', 0.8837869167327881)],
 [[[344.0, 307.0], [390.0, 307.0], [390.0, 318.0], [344.0, 318.0]], ('comv3-512', 0.9259818196296692)],
 [[[68.0, 317.0], [116.0, 317.0], [116.0, 330.0], [68.0, 330.0]], ('comv3-512', 0.915229082107544)],
 [[[124.0, 317.0], [169.0, 317.0], [169.0, 330.0], [124.0, 330.0]], ('conv3-512', 0.9841454029083252)],
 [[[177.0, 317.0], [225.0, 317.0], [225.0, 330.0], [177.0, 330.0]], ('conv3-512', 0.984390914440155)],
 [[[232.0, 317.0], [280.0, 317.0], [280.0, 330.0], [232.0, 330.0]], ('conv3-512', 0.8874117136001587)],
 [[[289.0, 317.0], [335.0, 317.0], [335.0, 330.0], [289.0, 330.0]], ('conv3-512', 0.9336977005004883)],
 [[[343.0, 317.0], [390.0, 317.0], [390.0, 330.0], [343.0, 330.0]], ('comv3-512', 0.8940605521202087)],
 [[[234.0, 328.0], [279.0, 328.0], [279.0, 339.0], [234.0, 339.0]], ('conv1-512', 0.9558531641960144)],
 [[[286.0, 329.0], [335.0, 326.0], [335.0, 339.0], [287.0, 341.0]], ('conv3-512', 0.8882243633270264)],
 [[[344.0, 327.0], [390.0, 327.0], [390.0, 341.0], [344.0, 341.0]], ('conv3-512', 0.8420982956886292)],
 [[[342.0, 338.0], [391.0, 338.0], [391.0, 352.0], [342.0, 352.0]], ('conv3-512', 0.9566413164138794)],
 [[[210.0, 350.0], [249.0, 350.0], [249.0, 363.0], [210.0, 363.0]], ('maxpool', 0.9814967513084412)],
 [[[210.0, 361.0], [250.0, 361.0], [250.0, 374.0], [210.0, 374.0]], ('FC-4096', 0.9948619604110718)],
 [[[210.0, 369.0], [250.0, 372.0], [249.0, 386.0], [209.0, 384.0]], ('FC-4096', 0.9227362275123596)],
 [[[209.0, 383.0], [250.0, 383.0], [250.0, 397.0], [209.0, 397.0]], ('FC-1000', 0.9900063872337341)],
 [[[210.0, 397.0], [249.0, 397.0], [249.0, 407.0], [210.0, 407.0]], ('soft-max', 0.9483590126037598)],
 [[[127.0, 422.0], [331.0, 422.0], [331.0, 435.0], [127.0, 435.0]], ('Textle 2: Number of parameters (in millions)', 0.9218906164169312)],
 [[[96.0, 434.0], [140.0, 434.0], [140.0, 448.0], [96.0, 448.0]], ('Taalevork', 0.8535614609718323)],
 [[[200.0, 435.0], [279.0, 435.0], [279.0, 447.0], [200.0, 447.0]], ('A.A-LRNB', 0.9558044672012329)],
 [[[101.0, 447.0], [193.0, 447.0], [193.0, 456.0], [101.0, 456.0]], ('Numberofparameters', 0.9161774516105652)],
 [[[218.0, 448.0], [232.0, 448.0], [232.0, 455.0], [218.0, 455.0]], ('133', 0.7948009967803955)],
 [[[253.0, 447.0], [359.0, 447.0], [359.0, 456.0], [253.0, 456.0]], ('13313411381144', 0.8931092619895935)]]
